{"ast":null,"code":"import { computed, ref, watch } from 'vue';\nimport { useStore } from 'vuex';\nimport { useVuelidate } from '@vuelidate/core';\nimport { required, helpers } from '@vuelidate/validators';\nimport CustomInput from '../atoms/CustomInput.vue';\nimport CustomTexarea from '../atoms/CustomTexarea.vue';\nimport CustomSelect from '../atoms/CustomSelect.vue';\nimport CustomButton from '../atoms/CustomButton.vue';\nimport { useRoute } from 'vue-router';\nexport default {\n  __name: 'CustomFormTasks',\n  props: {\n    dataEdit: Object\n  },\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const store = useStore();\n    const route = useRoute();\n    const idProject = route.params.id;\n    const props = __props;\n    const newTask = ref({\n      name: '',\n      description: '',\n      status: {\n        label: 'Pendiente',\n        _id: '0'\n      }\n    });\n    const optionsSelect = ref([{\n      label: 'Pendiente',\n      _id: '0'\n    }, {\n      label: 'En progreso',\n      _id: '1'\n    }, {\n      label: 'Completado',\n      _id: '2'\n    }]);\n    const rules = {\n      name: {\n        required: helpers.withMessage('El nombre es requerido', required)\n      },\n      description: {\n        required: helpers.withMessage('La descripción es requerida', required)\n      }\n    };\n    watch(() => props.dataEdit, propEdit => {\n      newTask.value = propEdit;\n    });\n    const v$ = useVuelidate(rules, newTask);\n    const validationForm = computed(() => {\n      v$.value.$touch();\n      return !v$.value.$invalid;\n    });\n    const addTasks = () => {\n      if (validationForm.value) {\n        const project = {\n          ...newTask.value\n        };\n        submitProject(project);\n        resetForm();\n      }\n    };\n    const resetForm = () => {\n      newTask.value = {\n        name: '',\n        description: '',\n        status: {\n          label: 'Pendiente',\n          _id: '0'\n        }\n      };\n      v$.value.$reset();\n    };\n    const submitProject = project => {\n      try {\n        if (!project._id) return store.dispatch('projects/addTask', {\n          idProject,\n          newTask: project\n        });\n        store.dispatch('projects/editTask', {\n          idProject,\n          newTask: project\n        });\n      } catch (error) {\n        console.error(error);\n      }\n    };\n    const __returned__ = {\n      store,\n      route,\n      idProject,\n      props,\n      newTask,\n      optionsSelect,\n      rules,\n      v$,\n      validationForm,\n      addTasks,\n      resetForm,\n      submitProject,\n      computed,\n      ref,\n      watch,\n      get useStore() {\n        return useStore;\n      },\n      get useVuelidate() {\n        return useVuelidate;\n      },\n      get required() {\n        return required;\n      },\n      get helpers() {\n        return helpers;\n      },\n      CustomInput,\n      CustomTexarea,\n      CustomSelect,\n      CustomButton,\n      get useRoute() {\n        return useRoute;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["computed","ref","watch","useStore","useVuelidate","required","helpers","CustomInput","CustomTexarea","CustomSelect","CustomButton","useRoute","store","route","idProject","params","id","props","__props","newTask","name","description","status","label","_id","optionsSelect","rules","withMessage","dataEdit","propEdit","value","v$","validationForm","$touch","$invalid","addTasks","project","submitProject","resetForm","$reset","dispatch","error","console"],"sources":["C:/Users/RCG/Documents/GitHub/PruebaVue3.0/src/components/molecules/CustomFormTasks.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <form @submit.prevent=\"addTasks\" class=\"form\">\r\n      <div class=\"form-group\">\r\n        <CustomInput\r\n          label=\"Nombre de la tarea *\"\r\n          v-model=\"newTask.name\"\r\n          type=\"text\"\r\n        />\r\n        <div class=\"message-error\" v-if=\"v$.name.$error\"> {{ v$.name.required.$message }} </div>\r\n        <CustomTexarea\r\n          label=\"Descripcion de la tarea *\"\r\n          v-model=\"newTask.description\"\r\n        />\r\n        <div class=\"message-error\" v-if=\"v$.name.$error\"> {{ v$.description.required.$message }} </div>\r\n  \r\n        <CustomSelect class=\"w-100\" :options=\"optionsSelect\" v-model=\"newTask.status\" />\r\n      </div>\r\n      <CustomButton class=\"button\" label=\"Enviar\" type=\"submit\" />\r\n    </form>\r\n  </div>\r\n</template>\r\n<script setup>\r\nimport { computed, ref, watch, defineProps } from 'vue';\r\nimport { useStore } from 'vuex';\r\nimport { useVuelidate } from '@vuelidate/core';\r\nimport { required, helpers } from '@vuelidate/validators';\r\nimport CustomInput from '../atoms/CustomInput.vue';\r\nimport CustomTexarea from '../atoms/CustomTexarea.vue';\r\nimport CustomSelect from '../atoms/CustomSelect.vue';\r\nimport CustomButton from '../atoms/CustomButton.vue';\r\nimport { useRoute } from 'vue-router';\r\n\r\nconst store = useStore();\r\n\r\nconst route = useRoute();\r\nconst idProject = route.params.id;\r\n\r\nconst props = defineProps({\r\n    dataEdit: Object,\r\n});\r\n\r\nconst newTask = ref({\r\n  name: '',\r\n  description: '',\r\n  status: {label: 'Pendiente', _id: '0'}\r\n});\r\n\r\nconst optionsSelect = ref([\r\n    {label: 'Pendiente', _id: '0'},\r\n    {label: 'En progreso', _id: '1'},\r\n    {label: 'Completado', _id: '2'}\r\n]);\r\n\r\nconst rules = {\r\n  name: { required: helpers.withMessage('El nombre es requerido', required) },\r\n  description: { required: helpers.withMessage('La descripción es requerida', required) }\r\n};\r\n\r\nwatch(() => props.dataEdit, (propEdit) => {\r\n  newTask.value = propEdit\r\n});\r\n\r\nconst v$ = useVuelidate(rules, newTask);\r\n\r\nconst validationForm = computed(() => {\r\n  v$.value.$touch();\r\n  return !v$.value.$invalid;\r\n})\r\n\r\nconst addTasks = () => { \r\n  if (validationForm.value) {\r\n    const project = { ...newTask.value };\r\n    submitProject(project);\r\n    resetForm()\r\n  }\r\n};\r\n\r\nconst resetForm = () => {\r\n  newTask.value = { name: '', description: '', status: {label: 'Pendiente', _id: '0'} };\r\n  v$.value.$reset();\r\n}\r\n\r\nconst submitProject = (project) => {\r\n  try {\r\n    if (!project._id) return store.dispatch('projects/addTask', {idProject, newTask: project});\r\n    store.dispatch('projects/editTask', {idProject, newTask: project});\r\n\r\n  } catch (error) {\r\n    console.error(error);\r\n  }\r\n};\r\n\r\n</script>\r\n\r\n<style scoped>\r\n.form-group {\r\n  margin-bottom: 10px ;\r\n}\r\n\r\n.message-error {\r\n  color: red;\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}